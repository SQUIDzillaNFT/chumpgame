<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <title>Chump Attack</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ¯</text></svg>" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&family=Bungee&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header id="titleBar"><h1>Chump Attack</h1></header>

    <div id="controlBar">
      <div class="actions">
        <button id="actionBtn">Start</button>
      </div>
      <div class="stats">
        <div class="stat"><span>Score:</span> <strong id="score">0</strong></div>
        <div class="stat"><span>Wave:</span> <strong id="wave">1</strong></div>
        <div class="stat"><span>Health:</span> <strong id="health">100</strong></div>
      </div>
    </div>

    <div id="stage">
      <canvas id="game" width="360" height="640"></canvas>
      <div id="gameOver" class="hidden">
        <h2>Game Over!</h2>
        <p>Score: <span id="finalScore">0</span></p>
        <p id="personalBest" class="personal-best"></p>
        <div id="leaderboard" class="leaderboard">
          <h3>Top Scores</h3>
          <div id="leaderboardList"></div>
        </div>
        <div id="scoreSubmitPrompt" class="score-submit-prompt">
          <p>Enter your name to submit score:</p>
          <input type="text" id="scoreSubmitInput" placeholder="Your name" maxlength="20" />
          <div class="gameOver-actions">
            <button id="submitScoreBtn">Submit Score</button>
            <button id="restartFromGameOver">Restart</button>
          </div>
        </div>
      </div>
    </div>

    <div id="namePrompt" class="overlay-prompt hidden">
      <h2>Enter Your Name</h2>
      <input type="text" id="playerNameInput" placeholder="Your name" maxlength="20" />
      <button id="nameSubmit">Start Playing</button>
    </div>

    

    

    <!-- Supabase Config -->
    <script>
      // Supabase configuration - Replace with your Supabase project URL and anon key
      // Get these from: https://app.supabase.com -> Your Project -> Settings -> API
      window.supabaseConfig = {
        url: 'https://mjazkeqdrfpgvpnsfjgd.supabase.co',
        anonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1qYXprZXFkcmZwZ3ZwbnNmamdkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMDI0NDMsImV4cCI6MjA3Nzc3ODQ0M30.t03x47uDhzO_NqjTGuUZjp9R_C6GZASDW-NeaLVeSIw',
      };
      
      // Helper function to make Supabase REST API calls
      window.supabaseRequest = async (method, endpoint, body = null) => {
        const url = `${window.supabaseConfig.url}/rest/v1/${endpoint}`;
        const headers = {
          'apikey': window.supabaseConfig.anonKey,
          'Authorization': `Bearer ${window.supabaseConfig.anonKey}`,
          'Content-Type': 'application/json',
          'Prefer': 'return=representation',
        };
        
        const options = {
          method,
          headers,
        };
        
        if (body) {
          options.body = JSON.stringify(body);
        }
        
        try {
          const response = await fetch(url, options);
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          if (method === 'GET') {
            return await response.json();
          }
          return await response.json();
        } catch (error) {
          console.error('Supabase request failed:', error);
          throw error;
        }
      };
    </script>
    <script src="src/game.js"></script>
  </body>
  </html>


